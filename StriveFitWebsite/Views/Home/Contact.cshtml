@model StriveFitWebsite.Models.ViewModels.ContactPageViewModel

@{
    ViewData["Title"] = "Contact Us Page";
    Layout = "~/Views/Shared/HomeLayout.cshtml";
}

<!-- Breadcrumb Section Begin -->
<section class="breadcrumb-section set-bg spad" data-setbg="/HomeDesign/img/about-bread.jpg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb-text">
                    <h2>Contact Us</h2>
                    <div class="breadcrumb-controls">
                        <a asp-action="Index" asp-controller="Home"><i class="fa fa-home"></i> Home</a>
                        <span>Contact Us</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Breadcrumb End -->
<!-- Contact Section Begin -->
<section class="contact-section spad">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                @foreach (var info in Model.Contactpages.Where(x => x.Title == "Information"))
                {
                    <div class="contact-info">
                        <h4>@info.Title</h4>
                        <ul>
                            @foreach (var contact in Model.Contactpages)
                            {
                                if (contact.Title == "Phone")
                                {
                                    <li><i class="fa fa-phone"></i>(+962) 079-852-3690</li>
                                }
                                if (contact.Title == "Email")
                                {
                                    <li><i class="fa fa-envelope"></i>StriveFit@gmail.com</li>
                                }
                            }
                        </ul>
                    </div>
                    <div class="contact-address">
                        @foreach (var contact in Model.Contactpages.Where(x => x.Title == "Address"))
                        {
                            <h4>@contact.Title</h4>
                            <ul>
                                <li><i class="fa fa-map-marker"></i> @contact.Contentvalue</li>
                            </ul>
                        }
                    </div>
                }
            </div>
            <div class="col-lg-8 offset-lg-1">
                <div class="contact-form">
                    @if (TempData["SuccessMessage"] != null)
                    {
                        <div class="alert alert-success">
                            @TempData["SuccessMessage"]
                        </div>
                    }

                    @if (TempData["ErrorMessage"] != null)
                    {
                        <div class="alert alert-danger">
                            @TempData["ErrorMessage"]
                        </div>
                    }
                    @foreach (var contact in Model.Contactpages.Where(x => x.Title == "Get in touch"))
                    {
                        <h4>@contact.Title</h4>

                        <!-- Display the success message if available -->
                        @if (ViewData["SuccessMessage"] != null)
                        {
                            <div class="alert alert-success">
                                @ViewData["SuccessMessage"]
                            </div>
                        }

                        <form asp-action="Create" asp-controller="Contactmessages" method="post">
                            <div class="row">
                                <div class="col-lg-6">
                                    <input type="text" name="Username" placeholder="Name" required>
                                </div>
                                <div class="col-lg-6">
                                    <input type="email" name="Useremail" placeholder="Email" required>
                                </div>
                                <div class="col-lg-12">
                                    <textarea name="Message" placeholder="Message" required></textarea>
                                    <button type="submit" class="c-btn">@contact.Contentvalue</button>
                                </div>
                            </div>
                        </form>
                    }
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Contact Section End -->

<script>
    
    $(document).ready(function () {
        $('form').on('submit', function (e) {
            e.preventDefault(); // Prevent default form submission

            const formData = $(this).serialize(); // Serialize form data

            $.post($(this).attr('action'), formData, function (response) {
                // Display a success message
                $('.contact-form').prepend('<div class="alert alert-success">Your message has been sent and will be reviewed by the admin.</div>');

                // Clear the form
                $('form')[0].reset();
            }).fail(function () {
                // Display an error message
                alert('An error occurred. Please try again.');
            });
        });
    });
</script>

